---
description: Generate or update project context document (PROJECT.md)
agent: specs
---

# /specs-project-init

Generate or update the project context document (PROJECT.md or docs/PROJECT.md). This command analyzes the codebase and creates comprehensive project documentation.

## Usage

```
/specs-project-init
/specs-project-init Update project documentation
/specs-project-init --file docs/PROJECT.md
```

## Instructions

1. **Determine Target Location**
   - Check if docs/PROJECT.md exists
   - Check if PROJECT.md exists at root
   - Ask user where to create/update if neither exists
   - Default to docs/PROJECT.md (following payments project pattern)

2. **Analyze Codebase Structure**
   - Scan directory structure
   - Identify tech stack from package files (package.json, .csproj, etc.)
   - Find build/test commands
   - Detect frameworks and libraries
   - Identify architecture patterns

3. **Extract Project Information**

   **Purpose:**
   - Look for README.md or documentation
   - Check for project description
   - Identify main functionality

   **Tech Stack:**
   - Backend languages/frameworks
   - Frontend technologies
   - Database systems
   - Infrastructure tools
   - Testing frameworks

   **Architecture:**
   - Project structure
   - Service boundaries
   - Design patterns
   - API conventions

   **Conventions:**
   - Code style rules
   - Naming conventions
   - File organization

4. **Read Existing PROJECT.md (if updating)**
   - Preserve manual sections marked with comments
   - Identify sections to update vs keep
   - Check for TODOs or FIXMEs

5. **Generate Content**

   Create/update PROJECT.md with sections:

   ```markdown
   # Project Context

   ## Purpose
   
   {Brief description of what this project does}

   ## Tech Stack

   ### Backend
   - Language: {e.g., C# .NET 10}
   - Framework: {e.g., ASP.NET Core}
   - Database: {e.g., Azure CosmosDB}
   - Key Libraries: {List main dependencies}

   ### Frontend
   - Framework: {e.g., React, Vue, etc.}
   - Build Tool: {e.g., Vite, Webpack}
   - Testing: {e.g., Jest, Vitest}

   ### Infrastructure
   - Deployment: {e.g., Kubernetes, Docker}
   - CI/CD: {e.g., GitHub Actions}
   - Hosting: {e.g., Azure, AWS}

   ## Architecture

   ### Project Structure
   ```
   {Tree showing key directories}
   ```

   ### Design Patterns
   - {Pattern 1}: {Where used}
   - {Pattern 2}: {Where used}

   ## Conventions

   ### Code Style
   - {Language}: {Style rules}

   ### Naming
   - {Convention}: {Description}

   ## Build & Test

   | Component | Build | Test |
   |-----------|-------|------|
   | {Component} | `{command}` | `{command}` |

   ## Key Files

   | File | Purpose |
   |------|---------|
   | {path} | {description} |

   ## Documentation

   | Topic | Location |
   |-------|----------|
   | Full context | PROJECT.md |
   | Spec workflow | SPECS.md |
   ```

6. **Preserve User Content**
   If updating existing file:
   - Keep sections marked: `<!-- USER-CONTENT-START -->...<!-- USER-CONTENT-END -->`
   - Preserve custom tables or sections
   - Only auto-generate standard sections

7. **Write/Update File**
   - Write to determined location
   - Add header comment: `<!-- Auto-generated by specs-project-init. Update by running /specs-project-init -->`

8. **Report Results**
   - Show file path created/updated
   - List sections generated
   - Note any manual sections preserved
   - Suggest next steps (e.g., review and customize)

## Updating Strategy

When updating an existing PROJECT.md:

1. Parse existing sections
2. For each auto-generated section:
   - Re-analyze codebase
   - Update if different
   - Keep if unchanged
3. Preserve manual sections
4. Add new discovered sections
5. Remove obsolete sections (ask first)

## Options

- `--file <path>`: Specify custom location for PROJECT.md
- `--dry-run`: Show what would be generated without writing
- `--force`: Overwrite without asking about manual sections

## Example

```
/specs-project-init

Generated docs/PROJECT.md:
✓ Purpose section
✓ Tech Stack (detected: .NET 10, React 18, CosmosDB)
✓ Architecture (detected: Microservices pattern)
✓ Conventions (detected: C# file-scoped namespaces)
✓ Build & Test commands
✓ Key files index

Preserved 2 manual sections (marked with USER-CONTENT comments)

Next: Review and customize the generated content.
```

## Rules

- DO scan codebase thoroughly
- DO detect actual tech stack from files
- DO preserve manual content in USER-CONTENT blocks
- DO ask before overwriting manual sections
- DO generate in standard PROJECT.md format
- DO update when codebase changes significantly
- DO NOT delete manual documentation without asking
- DO NOT overwrite unless --force or user confirms
